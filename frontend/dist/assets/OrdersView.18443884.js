import{N as $}from"./NavbarComponent.f11176d7.js";import{L as C,O as d,q as x,o as r,a as l,p as w,f as e,t as n,b as c,g as D,F as f,d as O,i as m,k as y}from"./index.c9aba457.js";import{_ as k,F as j}from"./FooterComponent.619a0465.js";import{_ as S}from"./ik-logo.8dbbd496.js";import".prisma/client/index-browser";const v=new C,i="em-codereever-service-production.up.railway.app/api";class N{static async getTest(){return(await d.get(i+"/test")).data}static async getAllProducts(){try{return(await d.get(i+"/products")).data}catch(s){console.log(s)}}static async createProduct(s){try{return(await d.post(i+"/product",s)).data}catch(o){console.log(o)}}static async getProduct(s){return(await d.get(i+"/product/"+s)).data}static async getAllProductsFromCategory(s){return(await d.get(i+"/category/"+s)).data}static async getAllCategories(){try{let s=await d.get(i+"/categories");return v.info("Retrieved all categories on frontend"),s.data}catch(s){v.error(s)}}static async getAllUsers(){return(await d.get(i+"/users")).data}static async login(s){try{return(await d.post(i+"/login",s)).data}catch(o){console.log(o)}}static async signUp(s){try{return(await d.post(i+"/register",s)).data}catch(o){console.log(o)}}static async getUserCart(s){try{return(await d.get(i+"/cart/"+s)).data}catch(o){console.log(o)}}static async updateCart(s){try{return(await d.post(i+"/cart-update",s)).data}catch(o){console.log(o)}}static async emptyCurrentCart(s){try{return(await d.get(i+"/empty-cart/"+s)).data}catch(o){console.log(o)}}static async imageUpload(s,o){try{let p=new FormData;return p.append("image",o),p.append("name",s),d.post("https://api.imgbb.com/1/upload?&key=1a9b57b4a75755ca7918b790b76e5c4e",p,{headers:{"Content-Type":"multipart/form-data"}}).then(b=>b.data)}catch(p){console.log(p)}}static async addImageToProduct(s,o,p){try{return(await d.post(i+"/image",{productId:s,image:o,isThumbnail:p})).data}catch(g){console.log(g)}}}const A=x({name:"OrderRowComponent",props:["allOrders","Admin"]}),U={key:0},I={class:"flex items-center space-x-3"},F=e("div",{class:"flex justify-center items-center w-12 h-12"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})])],-1),T={class:"font-bold"},M={class:"text-sm opacity-50"},L={class:"font-medium"},P={class:"text-sm opacity-50"},R={key:0,class:"badge badge-success font-semibold"},V={key:1,class:"badge badge-error font-semibold"},q={key:0,class:"badge badge-lg badge-error rounded"},B={key:1,class:"badge badge-lg badge-success rounded"},z={key:2,class:"badge badge-lg badge-ghost rounded"},Y=["onClick"],E={key:1},G=["onClick"];function H(t,s,o,p,g,b){return r(!0),l(f,null,w(t.allOrders,(a,h)=>(r(),l("tr",{key:h,class:"hover"},[e("td",null,n(h+1),1),t.Admin?(r(),l("td",U,[e("div",I,[F,e("div",null,[e("div",T,n(a.payeeName),1),e("div",M,"#ID: "+n(a.payeeID),1)])])])):c("",!0),e("td",null,[e("div",L,"OrderID: "+n(a.orderID),1),e("div",P,"["+n(a.cartItems.length)+"] Item(s)",1),a.shipping?(r(),l("span",R,"Shipping Requested")):c("",!0),a.shipping?c("",!0):(r(),l("span",V,"No Shipping"))]),e("td",null,n(a.date),1),e("td",null,"$"+n(a.total)+" USD",1),e("td",null,[a.shipping&&!a.shippingCompleted?(r(),l("span",q,"Not yet shipped")):c("",!0),a.shipping&&a.shippingCompleted?(r(),l("span",B,"Delivered")):c("",!0),a.shipping?c("",!0):(r(),l("span",z,"N/A"))]),e("th",null,[e("label",{for:"orderDetailsModal",class:"btn btn-xs modal-button",onClick:u=>this.$emitter.emit("order-selected",a)},"details",8,Y)]),t.Admin?(r(),l("th",E,[e("label",{for:"deliveryConfirmation",class:D(`btn btn-sm modal-button ${a.shippingCompleted||!a.shipping?"btn-disabled":""}`),onClick:u=>this.$emitter.emit("order-selected",a)},"mark as Delivered",10,G)])):c("",!0)]))),128)}const K=k(A,[["render",H]]);const Q=x({name:"OrderDetailsComponent",props:["order"],data(){return{optionArray:[]}},methods:{},mounted(){}}),J=e("input",{type:"checkbox",id:"orderDetailsModal",class:"modal-toggle"},null,-1),W={for:"orderDetailsModal",class:"modal sm:items-center text-black modal-bottom cursor-pointer"},X={class:"modal-box sm:w-11/12 scroll-style rounded bg-gray-200 sm:max-w-5xl m-h-48-rem"},Z={class:"flex justify-between items-center flex-col sm:flex-row"},ee=e("img",{src:S,alt:"Ishmael Klassic logo",class:"h-12"},null,-1),te={class:"font-bold text-center my-5 text-2xl"},se={class:"flex justify-between py-1 text-lg"},oe=e("p",null,"Date placed",-1),ae={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},ne={class:"flex justify-between py-1 text-lg"},re=e("p",null,"Order Total",-1),le={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},de={class:"flex justify-between py-1 text-lg"},ie=e("p",null,"Unique key",-1),ce={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},pe={class:"flex justify-between py-1 text-lg"},ge=e("p",null,"Status",-1),he={key:0,class:"font-bold badge badge-lg rounded text-black bg-success"},ue={key:1,class:"font-bold badge badge-lg rounded text-black bg-error"},_e={key:2,class:"font-bold badge badge-lg rounded text-black bg-gray-400"},be=e("h3",{class:"font-bold text-center my-5 text-2xl"},"Items Ordered",-1),me={class:"overflow-x-auto"},ye={class:"table rounded-lg bg-gray-300 w-full mb-5"},fe=e("thead",{class:"rounded-none"},[e("tr",null,[e("th",{class:"bg-gray-500 rounded-none"},"Qty"),e("th",{class:"bg-gray-500"},"Name"),e("th",{class:"bg-gray-500"},"Price(USD)")])],-1),we={class:"bg-gray-300"},xe={class:"bg-gray-300"},ke={class:"font-medium"},ve={class:"bg-gray-300"},$e={class:"flex justify-between py-1 text-lg"},Ce=e("p",null,"Item(s) Subtotal",-1),De={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},Oe=e("h3",{class:"font-bold text-center my-5 text-2xl"},"Shipping",-1),je={class:"flex justify-between items-center py-1"},Se=e("p",{class:"text-lg"},"Shipping Requested",-1),Ne={key:0,class:"bg-success rounded-full aspect-square w-8 flex justify-center items-center"},Ae=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Ue=[Ae],Ie={key:1,class:"bg-error rounded-full aspect-square w-8 flex justify-center items-center"},Fe=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Te=[Fe],Me={key:0,class:"flex justify-between py-1 text-lg"},Le=e("p",null,"Shipping Address",-1),Pe={class:"font-bold badge badge-lg rounded text-black bg-gray-200 max-w-lg h-fit"},Re={class:"flex justify-between py-1 text-lg"},Ve=e("p",null,"Customer Name",-1),qe={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},Be={class:"flex justify-between py-1 text-lg"},ze=e("p",null,"Customer Contact No.",-1),Ye={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},Ee={class:"flex justify-between py-1 text-lg"},Ge=e("p",null,"Shipping fee",-1),He={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},Ke=e("h3",{class:"font-bold text-center my-3 text-2xl"},"Payment",-1),Qe={class:"flex justify-between py-1 text-lg"},Je=e("p",null,"Total before tax",-1),We={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},Xe={class:"flex justify-between py-1 text-lg"},Ze=e("p",null,"Total + tax",-1),et={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},tt={class:"flex justify-between py-1 text-lg"},st=e("p",{class:"font-medium"},[O("GrandTotal "),e("span",{class:"font-thin text-sm"},"incl. shipping")],-1),ot={class:"font-bold badge badge-lg rounded text-black bg-gray-200"},at=e("div",{class:"modal-action"},[e("label",{for:"orderDetailsModal",class:"btn"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})])])],-1);function nt(t,s,o,p,g,b){return r(),l(f,null,[J,e("label",W,[e("label",X,[e("span",Z,[ee,e("h3",te,"OrderID# "+n(t.order.orderID),1)]),e("span",se,[oe,e("p",ae,n(t.order.date),1)]),e("span",ne,[re,e("p",le,"$ "+n(t.order.total)+" USD",1)]),e("span",de,[ie,e("p",ce,n(t.order._id),1)]),e("span",pe,[ge,t.order.shipping&&t.order.shippingCompleted?(r(),l("p",he,"Completed & Delivered")):c("",!0),t.order.shipping&&!t.order.shippingCompleted?(r(),l("p",ue,"Not Yet Shipped")):c("",!0),t.order.shipping?c("",!0):(r(),l("p",_e,"Transaction Only"))]),be,e("div",me,[e("table",ye,[fe,e("tbody",null,[(r(!0),l(f,null,w(t.order.cartItems,(a,h)=>(r(),l("tr",{key:h},[e("th",we,n(a.quantity)+"x",1),e("td",xe,[e("div",ke,n(a.title),1),(r(!0),l(f,null,w(a.options,(u,_)=>(r(),l("div",{class:"text-sm",key:_},n(_.charAt(0).toUpperCase()+_.slice(1))+" : "+n(u.charAt(0).toUpperCase()+u.slice(1)),1))),128))]),e("td",ve,"$ "+n(a.price),1)]))),128))])]),e("span",$e,[Ce,e("p",De,"$ "+n(t.order.total-(t.order.shippingFee+t.order.tax))+" USD",1)])]),Oe,e("span",je,[Se,t.order.shipping?(r(),l("div",Ne,Ue)):c("",!0),t.order.shipping?c("",!0):(r(),l("div",Ie,Te))]),t.order.shipping?(r(),l("span",Me,[Le,e("p",Pe,n(t.order.shippingAddress),1)])):c("",!0),e("span",Re,[Ve,e("p",qe,n(t.order.payeeName),1)]),e("span",Be,[ze,e("p",Ye,n(t.order.payeeContactNumber),1)]),e("span",Ee,[Ge,e("p",He,"$ "+n(t.order.shippingFee)+" USD",1)]),Ke,e("span",Qe,[Je,e("p",We,"$ "+n(t.order.total-(t.order.shippingFee+t.order.tax))+" USD",1)]),e("span",Xe,[Ze,e("p",et,"$ "+n(t.order.total+t.order.tax)+" USD",1)]),e("span",tt,[st,e("p",ot,"$ "+n(t.order.total)+" USD",1)]),at])])],64)}const rt=k(Q,[["render",nt]]);const lt=x({name:"OrdersView",components:{NavbarComponent:$,OrderRowComponent:K,OrderDetailsComponent:rt,FooterComponent:j},data(){return{orderList:[],selectedOrder:{}}},async created(){this.orderList=await N.getOrders(this.$getCurrentUserId()),this.$emitter.on("order-selected",async t=>{this.selectedOrder=t})}}),dt=e("div",{class:"text-white my-10"},[e("h1",{class:"text-4xl font-extrabold text-center"},"Your Orders"),e("p",{class:"text-center font-medium"},"Displays all the orders you have made")],-1),it={class:"flex justify-center"},ct={class:"overflow-x-auto w-full max-w-6xl max-height-500"},pt={class:"table w-full"},gt=e("thead",{class:"relative"},[e("tr",{class:"sticky top-0"},[e("th"),e("th",null,"Order"),e("th",null,"Date of purchase"),e("th",null,"Order Total"),e("th",null,"Status"),e("th",null,"view")])],-1);function ht(t,s,o,p,g,b){const a=m("NavbarComponent"),h=m("OrderRowComponent"),u=m("OrderDetailsComponent"),_=m("FooterComponent");return r(),l("section",null,[y(a),dt,e("div",it,[e("div",ct,[e("table",pt,[gt,e("tbody",null,[y(h,{allOrders:t.orderList,Admin:this.$checkForAdmin()},null,8,["allOrders","Admin"])])])])]),y(u,{order:t.selectedOrder},null,8,["order"]),y(_,{class:"mt-20"})])}const ft=k(lt,[["render",ht]]);export{ft as default};
